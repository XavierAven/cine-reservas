<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Detalle Película</title>
    <style>
        body { font-family: Arial; margin: 30px; background: #f9f9f9; color: #222; }
        h1, h2 { color: #004aad; }
        #detalle, #sesiones { margin-top: 20px; }
        li { margin: 5px 0; }
    </style>
</head>
<body>
    <h1 id="titulo">Cargando...</h1>
    <div id="detalle">
        <p><strong>Género:</strong> <span id="genero"></span></p>
        <p><strong>Duración:</strong> <span id="duracion"></span> min</p>
        <p><strong>Director:</strong> <span id="director"></span></p>
        <p><strong>Actores principales:</strong> <span id="actores"></span></p>
        <p><strong>Descripción:</strong> <span id="descripcion"></span></p>
    </div>
    <div id="sesiones">
        <h2>Sesiones disponibles</h2>
        <ul id="listaSesiones"></ul>
    </div>
    <script>
        const params = new URLSearchParams(window.location.search);
        const id = params.get("id");

        fetch(`/peliculas/${id}`)
            .then(res => res.json())
            .then(data => {
                const p = data.pelicula;
                document.getElementById("titulo").textContent = p.titulo;
                document.getElementById("genero").textContent = p.genero;
                document.getElementById("duracion").textContent = p.duracion;
                document.getElementById("director").textContent = p.director;
                document.getElementById("actores").textContent = p.actores_principales;
                document.getElementById("descripcion").textContent = p.descripcion;

                const sesiones = data.sesiones;
                const lista = document.getElementById("listaSesiones");
                sesiones.forEach(s => {
                    const li = document.createElement("li");
                    li.textContent = `Fecha: ${s.fecha}, Hora: ${s.hora}, Sala: ${s.sala}`;
                    lista.appendChild(li);
                });
            });
    </script>
</body>
</html>
